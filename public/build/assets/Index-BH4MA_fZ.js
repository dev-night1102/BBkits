import{r as d,j as e,Q as H,t as E,S as h}from"./app-D93f2xyd.js";import{A as V}from"./AuthenticatedLayout-CodDpF2f.js";import"./transition-D868mK_z.js";function U({auth:D,designs:o,categories:C,filters:i}){var k;const[F,y]=d.useState(!1),[A,f]=d.useState(!1),[b,j]=d.useState(null),[r,l]=d.useState(!1),[v,q]=d.useState((i==null?void 0:i.search)||""),[N,I]=d.useState((i==null?void 0:i.category)||"all"),[_,L]=d.useState((i==null?void 0:i.status)||"all"),[n,w]=d.useState({name:"",slug:"",description:"",category:"",image_url:"",design_file_url:"",additional_cost:0,is_active:!0,sort_order:0,compatible_positions:[],compatible_colors:[]}),[c,p]=d.useState({}),[t,x]=d.useState({}),M=a=>a.toLowerCase().replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ç]/g,"c").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").trim(),S=()=>{w({name:"",slug:"",description:"",category:"",image_url:"",design_file_url:"",additional_cost:0,is_active:!0,sort_order:0,compatible_positions:[],compatible_colors:[]}),x({})},B=a=>{a.preventDefault();const s={};v&&(s.search=v),N!=="all"&&(s.category=N),_!=="all"&&(s.status=_),h.get(route("admin.embroidery.designs.index"),s,{preserveState:!0,preserveScroll:!0})},$=async a=>{a.preventDefault(),l(!0),x({}),h.post(route("admin.embroidery.designs.store"),n,{onSuccess:()=>{y(!1),S(),l(!1)},onError:s=>{x(s),l(!1)},onFinish:()=>{l(!1)}})},R=async a=>{a.preventDefault(),b!=null&&b.id&&(l(!0),x({}),h.put(route("admin.embroidery.designs.update",b.id),c,{onSuccess:()=>{f(!1),j(null),p({}),l(!1)},onError:s=>{x(s),l(!1)},onFinish:()=>{l(!1)}}))},T=a=>{!(a!=null&&a.id)||!confirm(`Tem certeza que deseja excluir o design "${a.name}"?`)||(l(!0),h.delete(route("admin.embroidery.designs.destroy",a.id),{onSuccess:()=>{l(!1)},onError:g=>{alert("Erro ao excluir o design"),l(!1)},onFinish:()=>{l(!1)}}))},z=a=>{a&&(j(a),p({name:a.name||"",slug:a.slug||"",description:a.description||"",category:a.category||"",image_url:a.image_url||"",design_file_url:a.design_file_url||"",additional_cost:a.additional_cost||0,is_active:a.is_active!==!1,sort_order:a.sort_order||0,compatible_positions:a.compatible_positions||[],compatible_colors:a.compatible_colors||[]}),x({}),f(!0))},u=(a,s)=>{w(g=>({...g,[a]:s})),a==="name"&&w(g=>({...g,slug:M(s)}))},m=(a,s)=>{p(g=>({...g,[a]:s}))};return e.jsxs(V,{user:D.user,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Gerenciar Designs de Bordado"}),e.jsx(E,{href:route("admin.embroidery.dashboard"),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Voltar ao Dashboard"})]}),children:[e.jsx(H,{title:"Gerenciar Designs de Bordado"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Designs de Bordado"}),e.jsx("button",{onClick:()=>y(!0),disabled:r,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",children:"Adicionar Novo Design"})]}),e.jsxs("form",{onSubmit:B,className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Buscar designs...",value:v,onChange:a=>q(a.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:N,onChange:a=>I(a.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Todas as Categorias"}),C&&C.map((a,s)=>e.jsx("option",{value:a,children:a},s))]}),e.jsxs("select",{value:_,onChange:a=>L(a.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"inactive",children:"Inativos"})]}),e.jsx("button",{type:"submit",disabled:r,className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",children:r?"Buscando...":"Buscar"})]}),r&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded text-blue-700",children:"Carregando..."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(k=o==null?void 0:o.data)==null?void 0:k.map(a=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.image_url&&e.jsx("img",{src:a.image_url,alt:a.name,className:"w-full h-32 object-cover rounded-md mb-3",onError:s=>{s.target.style.display="none"}}),e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-lg text-gray-800",children:a.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.is_active?"Ativo":"Inativo"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-blue-600",children:a.category}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",parseFloat(a.additional_cost||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>z(a),disabled:r,className:"flex-1 bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 text-sm rounded disabled:opacity-50",children:"Editar"}),e.jsx("button",{onClick:()=>T(a),disabled:r,className:"flex-1 bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 text-sm rounded disabled:opacity-50",children:"Excluir"})]})]},a.id)),(!(o!=null&&o.data)||o.data.length===0)&&!r&&e.jsx("div",{className:"col-span-full text-center py-12",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhum design encontrado"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comece criando um novo design de bordado."})]})})]}),(o==null?void 0:o.links)&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("div",{className:"flex space-x-1",children:o.links.map((a,s)=>e.jsx(E,{href:a.url||"#",className:`px-3 py-2 text-sm rounded ${a.active?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"} ${a.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:a.label}},s))})})]})})})}),F&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Adicionar Novo Design"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:n.name,onChange:a=>u("name",a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),t.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:n.slug,onChange:a=>u("slug",a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),t.slug&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.slug})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsx("input",{type:"text",value:n.category,onChange:a=>u("category",a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ex: Animais, Personagens, Brasões",required:!0}),t.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo Adicional (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:n.additional_cost,onChange:a=>u("additional_cost",parseFloat(a.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),t.additional_cost&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.additional_cost})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL da Imagem"}),e.jsx("input",{type:"url",value:n.image_url,onChange:a=>u("image_url",a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://exemplo.com/imagem.jpg"}),t.image_url&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.image_url})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:n.sort_order,onChange:a=>u("sort_order",parseInt(a.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),e.jsx("textarea",{value:n.description,onChange:a=>u("description",a.target.value),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descrição do design..."})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.is_active,onChange:a=>u("is_active",a.target.checked),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ativo"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{y(!1),S()},disabled:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50",children:r?"Salvando...":"Salvar"})]})]})})}),A&&b&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Editar Design"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:c.name||"",onChange:a=>m("name",a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),t.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:c.slug||"",onChange:a=>m("slug",a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),t.slug&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.slug})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsx("input",{type:"text",value:c.category||"",onChange:a=>m("category",a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),t.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo Adicional (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:c.additional_cost||0,onChange:a=>m("additional_cost",parseFloat(a.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),t.additional_cost&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.additional_cost})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL da Imagem"}),e.jsx("input",{type:"url",value:c.image_url||"",onChange:a=>m("image_url",a.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.image_url&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.image_url})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:c.sort_order||0,onChange:a=>m("sort_order",parseInt(a.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),e.jsx("textarea",{value:c.description||"",onChange:a=>m("description",a.target.value),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.is_active!==!1,onChange:a=>m("is_active",a.target.checked),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ativo"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{f(!1),j(null),p({}),x({})},disabled:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50",children:r?"Salvando...":"Salvar"})]})]})})})]})}export{U as default};
