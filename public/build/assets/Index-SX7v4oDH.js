import{r as c,x as w,j as e,Q as H,t as C,S as P}from"./app-aTE887Py.js";import{A as T}from"./AuthenticatedLayout-CbRfytVO.js";import"./transition-Dl5ZUH7v.js";function Q({auth:S,designs:r,categories:p,filters:n}){const[k,m]=c.useState(!1),[D,x]=c.useState(!1),[u,g]=c.useState(null),[h,E]=c.useState(n&&n.search||""),[f,A]=c.useState(n&&n.category||"all"),[y,M]=c.useState(n&&n.status||"all"),{data:d,setData:l,post:q,processing:v,errors:s,reset:j}=w({name:"",slug:"",description:"",category:"",image_url:"",design_file_url:"",additional_cost:0,is_active:!0,sort_order:0,compatible_positions:[],compatible_colors:[]}),{data:i,setData:o,put:I,processing:N,errors:a,reset:_}=w({name:"",slug:"",description:"",category:"",image_url:"",design_file_url:"",additional_cost:0,is_active:!0,sort_order:0,compatible_positions:[],compatible_colors:[]}),B=t=>{t.preventDefault(),P.get(route("admin.embroidery.designs.index"),{search:h,category:f,status:y},{preserveState:!0,preserveScroll:!0})},L=t=>{t.preventDefault(),q(route("admin.embroidery.designs.store"),{onSuccess:()=>{m(!1),j()}})},R=t=>{if(t.preventDefault(),!u||!u.id){console.error("No design selected for editing");return}I(route("admin.embroidery.designs.update",u.id),{onSuccess:()=>{x(!1),g(null),_()},onError:b=>{console.error("Edit failed:",b)}})},$=t=>{alert("Função de deletar temporariamente desabilitada")},F=t=>{t&&(g(t),o({name:t.name||"",slug:t.slug||"",description:t.description||"",category:t.category||"",image_url:t.image_url||"",design_file_url:t.design_file_url||"",additional_cost:t.additional_cost||0,is_active:t.is_active??!0,sort_order:t.sort_order||0,compatible_positions:t.compatible_positions||[],compatible_colors:t.compatible_colors||[]}),x(!0))},z=t=>t.toLowerCase().replace(/[àáâãäå]/g,"a").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/[òóôõö]/g,"o").replace(/[ùúûü]/g,"u").replace(/[ç]/g,"c").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").trim();return e.jsxs(T,{user:S.user,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Gerenciar Designs de Bordado"}),e.jsx(C,{href:route("admin.embroidery.dashboard"),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Voltar ao Dashboard"})]}),children:[e.jsx(H,{title:"Gerenciar Designs de Bordado"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Designs de Bordado"}),e.jsx("button",{onClick:()=>m(!0),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Adicionar Novo Design"})]}),e.jsxs("form",{onSubmit:B,className:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Buscar designs...",value:h,onChange:t=>E(t.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:f,onChange:t=>A(t.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Todas as Categorias"}),p&&p.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:y,onChange:t=>M(t.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"Todos os Status"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"inactive",children:"Inativos"})]}),e.jsx("button",{type:"submit",className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Buscar"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r&&r.data&&r.data.map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[t.image_url&&e.jsx("img",{src:t.image_url,alt:t.name,className:"w-full h-32 object-cover rounded-md mb-3"}),e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-lg text-gray-800",children:t.name}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.is_active?"Ativo":"Inativo"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.description}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t.category}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["R$ ",parseFloat(t.additional_cost).toFixed(2)]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>F(t),className:"flex-1 bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 text-sm rounded",children:"Editar"}),e.jsx("button",{onClick:()=>$(),className:"flex-1 bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 text-sm rounded",children:"Excluir"})]})]},t.id)),(!r||!r.data||r.data.length===0)&&e.jsx("div",{className:"col-span-full text-center py-12",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhum design encontrado"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comece criando um novo design de bordado."})]})})]}),r&&r.links&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("div",{className:"flex space-x-1",children:r.links.map((t,b)=>e.jsx(C,{href:t.url,className:`px-3 py-2 text-sm rounded ${t.active?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"} ${t.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},b))})})]})})})}),k&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Adicionar Novo Design"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:d.name,onChange:t=>{l("name",t.target.value),l("slug",z(t.target.value))},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),s.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:d.slug,onChange:t=>l("slug",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),s.slug&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.slug})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsx("input",{type:"text",value:d.category,onChange:t=>l("category",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ex: Animais, Personagens, Brasões",required:!0}),s.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo Adicional (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:d.additional_cost,onChange:t=>l("additional_cost",parseFloat(t.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),s.additional_cost&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.additional_cost})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL da Imagem"}),e.jsx("input",{type:"url",value:d.image_url,onChange:t=>l("image_url",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://exemplo.com/imagem.jpg"}),s.image_url&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.image_url})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:d.sort_order,onChange:t=>l("sort_order",parseInt(t.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),e.jsx("textarea",{value:d.description,onChange:t=>l("description",t.target.value),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descrição do design..."})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.is_active,onChange:t=>l("is_active",t.target.checked),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ativo"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{m(!1),j()},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50",children:v?"Salvando...":"Salvar"})]})]})})}),D&&u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Editar Design"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:i.name,onChange:t=>o("name",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),a.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:i.slug,onChange:t=>o("slug",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),a.slug&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.slug})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),e.jsx("input",{type:"text",value:i.category,onChange:t=>o("category",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),a.category&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo Adicional (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:i.additional_cost,onChange:t=>o("additional_cost",parseFloat(t.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),a.additional_cost&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.additional_cost})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL da Imagem"}),e.jsx("input",{type:"url",value:i.image_url,onChange:t=>o("image_url",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.image_url&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.image_url})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),e.jsx("input",{type:"number",value:i.sort_order,onChange:t=>o("sort_order",parseInt(t.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrição"}),e.jsx("textarea",{value:i.description,onChange:t=>o("description",t.target.value),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("input",{type:"checkbox",checked:i.is_active,onChange:t=>o("is_active",t.target.checked),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Ativo"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{x(!1),g(null),_()},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:N,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50",children:N?"Salvando...":"Salvar"})]})]})})})]})}export{Q as default};
