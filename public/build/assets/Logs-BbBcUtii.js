import{r as m,j as e,Q as o,t as l}from"./app-BaYMHnyA.js";import{A as p}from"./AuthenticatedLayout-DX8uEGb5.js";import"./transition-_ftkXyXa.js";function y({auth:d,logs:r,filters:h}){const[t,i]=m.useState(null),n=s=>{const a={success:"bg-green-100 text-green-800",error:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a[s]||"bg-gray-100 text-gray-800"}`,children:s})},x=s=>{const a={tiny_erp:"bg-purple-100 text-purple-800",whatsapp:"bg-green-100 text-green-800",wati:"bg-green-100 text-green-800"},c={tiny_erp:"Tiny ERP",whatsapp:"WhatsApp",wati:"WATI"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a[s]||"bg-gray-100 text-gray-800"}`,children:c[s]||s})};return e.jsxs(p,{user:d.user,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Logs de Integrações"}),e.jsx(l,{href:route("admin.integrations.index"),className:"text-sm text-pink-600 hover:text-pink-800",children:"← Voltar para Integrações"})]}),children:[e.jsx(o,{title:"Logs de Integrações"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Filtros"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serviço"}),e.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"tiny_erp",children:"Tiny ERP"}),e.jsx("option",{value:"whatsapp",children:"WhatsApp"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"success",children:"Sucesso"}),e.jsx("option",{value:"error",children:"Erro"}),e.jsx("option",{value:"warning",children:"Aviso"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Início"}),e.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500 sm:text-sm"})]})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Hora"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Serviço"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ação"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pedido"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mensagem"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x(s.service)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.action}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n(s.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.order_id?e.jsxs(l,{href:route("sales.show",s.order_id),className:"text-pink-600 hover:text-pink-800",children:["#",s.order_token||s.order_id]}):"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"max-w-xs truncate",children:s.message})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("button",{onClick:()=>i(s),className:"text-pink-600 hover:text-pink-900",children:"Ver detalhes"})})]},s.id))})]})}),r.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhum log encontrado"})})]})})]})}),t&&e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity z-50",children:e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl",children:[e.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full",children:[e.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900 mb-4",children:"Detalhes do Log"}),e.jsxs("div",{className:"mt-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Data/Hora:"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleString("pt-BR")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Serviço:"}),e.jsx("p",{className:"text-sm text-gray-500",children:t.service})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Ação:"}),e.jsx("p",{className:"text-sm text-gray-500",children:t.action})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Status:"}),e.jsx("p",{className:"text-sm text-gray-500",children:t.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Mensagem:"}),e.jsx("p",{className:"text-sm text-gray-500",children:t.message})]}),t.request_data&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Dados da Requisição:"}),e.jsx("pre",{className:"text-xs text-gray-500 bg-gray-100 p-2 rounded mt-1 overflow-auto max-h-40",children:JSON.stringify(t.request_data,null,2)})]}),t.response_data&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Resposta:"}),e.jsx("pre",{className:"text-xs text-gray-500 bg-gray-100 p-2 rounded mt-1 overflow-auto max-h-40",children:JSON.stringify(t.response_data,null,2)})]})]})]})})}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:e.jsx("button",{type:"button",onClick:()=>i(null),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Fechar"})})]})})})})]})}export{y as default};
