import{r as x,x as k,j as e,Q as C,S as c,V as p}from"./app-N9bqzehR.js";import{A as _}from"./AuthenticatedLayout-Dffu-1DY.js";import{P as m}from"./PrimaryButton-Do9VVSWA.js";import{D as S}from"./DangerButton-fgFgo8yE.js";import"./transition-Csi0mL2A.js";function U({auth:u,users:a}){const[l,d]=x.useState(!1),[g,o]=x.useState(!1),{data:r,setData:i,post:h,errors:t,reset:f}=k({name:"",email:"",password:"",password_confirmation:"",role:"manager"}),j=s=>{d(!0),c.put(route("admin.users.approve",s),{},{onFinish:()=>d(!1)})},y=s=>{d(!0),c.put(route("admin.users.reject",s),{},{onFinish:()=>d(!1)})},b=s=>{s.preventDefault(),h(route("admin.users.store"),{onSuccess:()=>{p.success("Usuário criado com sucesso!"),o(!1),f()},onError:()=>{p.error("Erro ao criar usuário. Verifique os dados.")}})},v=s=>{const n={admin:"bg-red-100 text-red-800",vendedora:"bg-blue-100 text-blue-800",financeiro:"bg-green-100 text-green-800",finance_admin:"bg-yellow-100 text-yellow-800",production_admin:"bg-purple-100 text-purple-800",manager:"bg-indigo-100 text-indigo-800"},w={admin:"Admin",vendedora:"Vendedora",financeiro:"Financeiro",finance_admin:"Admin Financeiro",production_admin:"Admin Produção",manager:"Gerente"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n[s]||"bg-gray-100 text-gray-800"}`,children:w[s]||s})},N=s=>s?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Aprovado"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pendente"});return e.jsxs(e.Fragment,{children:[e.jsxs(_,{user:u.user,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Gerenciar Usuários"}),e.jsxs(m,{onClick:()=>o(!0),className:"bg-indigo-600 hover:bg-indigo-700",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Criar Usuário"]})]}),children:[e.jsx(C,{title:"Gerenciar Usuários"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Função"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data de Cadastro"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aprovado por"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.data.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:s.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v(s.role)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N(s.approved)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.approved_by?s.approved_by.name:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.role==="vendedora"&&e.jsx("div",{className:"flex space-x-2",children:s.approved?e.jsx(S,{onClick:()=>y(s.id),disabled:l,className:"text-xs",children:"Revogar"}):e.jsx(m,{onClick:()=>j(s.id),disabled:l,className:"text-xs",children:"Aprovar"})})})]},s.id))})]})}),a.links&&a.links.length>3&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:a.links.map((s,n)=>e.jsx("button",{onClick:()=>s.url&&c.get(s.url),disabled:!s.url,className:`relative inline-flex items-center px-4 py-2 text-sm font-medium ${s.active?"z-10 bg-pink-50 border-pink-500 text-pink-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} ${s.url?"":"cursor-not-allowed opacity-50"} ${n===0?"rounded-l-md":""} ${n===a.links.length-1?"rounded-r-md":""} border`,dangerouslySetInnerHTML:{__html:s.label}},n))})})]})})})})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Criar Novo Usuário"}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:b,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>i("name",s.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500",required:!0}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:r.email,onChange:s=>i("email",s.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500",required:!0}),t.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Função"}),e.jsxs("select",{value:r.role,onChange:s=>i("role",s.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"manager",children:"Gerente"}),e.jsx("option",{value:"financeiro",children:"Financeiro"}),e.jsx("option",{value:"production_admin",children:"Admin Produção"}),e.jsx("option",{value:"admin",children:"Admin"})]}),t.role&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),e.jsx("input",{type:"password",value:r.password,onChange:s=>i("password",s.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500",required:!0}),t.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Senha"}),e.jsx("input",{type:"password",value:r.password_confirmation,onChange:s=>i("password_confirmation",s.target.value),className:"w-full rounded-lg border-gray-300 focus:border-indigo-500 focus:ring-indigo-500",required:!0}),t.password_confirmation&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.password_confirmation})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancelar"}),e.jsx(m,{type:"submit",disabled:l,className:"bg-indigo-600 hover:bg-indigo-700",children:l?"Criando...":"Criar Usuário"})]})]})]})})]})}export{U as default};
