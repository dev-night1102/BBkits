import{r as c,j as e}from"./app-D0iU06Br.js";import{X as j,E as f}from"./x-4wIC27Fg.js";import{c as x}from"./createLucideIcon-LjyDwo3B.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],b=x("funnel",N);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],v=x("search",w);function k({isOpen:p,onClose:d,sales:o,sellerName:m}){const[l,u]=c.useState("all"),[r,g]=c.useState(""),a=c.useMemo(()=>{let t=o;return l!=="all"&&(t=t.filter(s=>s.status===l)),r&&(t=t.filter(s=>{var n;return s.client_name.toLowerCase().includes(r.toLowerCase())||((n=s.sale_number)==null?void 0:n.toLowerCase().includes(r.toLowerCase()))})),t},[o,l,r]),i=c.useMemo(()=>({total:a.reduce((t,s)=>t+(s.received_amount||0),0),approved:a.filter(t=>t.status==="aprovado").reduce((t,s)=>t+(s.received_amount||0),0),pending:a.filter(t=>t.status==="pendente").reduce((t,s)=>t+(s.received_amount||0),0),rejected:a.filter(t=>t.status==="recusado").reduce((t,s)=>t+(s.received_amount||0),0)}),[a]);if(!p)return null;const h=t=>({aprovado:{label:"Aprovado",class:"bg-green-100 text-green-800"},pendente:{label:"Pendente",class:"bg-yellow-100 text-yellow-800"},recusado:{label:"Recusado",class:"bg-red-100 text-red-800"}})[t]||{label:t,class:"bg-gray-100 text-gray-800"},y=t=>({fully_paid:{label:"Totalmente Pago",class:"bg-green-100 text-green-800"},partially_paid:{label:"Parcialmente Pago",class:"bg-orange-100 text-orange-800"},unpaid:{label:"Não Pago",class:"bg-red-100 text-red-800"}})[t]||{label:t,class:"bg-gray-100 text-gray-800"};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Todas as Vendas"}),e.jsx("p",{className:"text-gray-600",children:m})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(j,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 border-b bg-gray-50",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5 text-gray-500"}),e.jsxs("select",{value:l,onChange:t=>u(t.target.value),className:"border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"all",children:"Todos Status"}),e.jsx("option",{value:"aprovado",children:"Aprovadas"}),e.jsx("option",{value:"pendente",children:"Pendentes"}),e.jsx("option",{value:"recusado",children:"Recusadas"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(v,{className:"w-5 h-5 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Buscar por cliente ou número...",value:r,onChange:t=>g(t.target.value),className:"border rounded-lg px-4 py-2 flex-1 focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsxs("p",{className:"text-xl font-bold",children:["R$ ",i.total.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-600",children:"Aprovadas"}),e.jsxs("p",{className:"text-xl font-bold text-green-800",children:["R$ ",i.approved.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-sm text-yellow-600",children:"Pendentes"}),e.jsxs("p",{className:"text-xl font-bold text-yellow-800",children:["R$ ",i.pending.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-sm text-red-600",children:"Recusadas"}),e.jsxs("p",{className:"text-xl font-bold text-red-800",children:["R$ ",i.rejected.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frete"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Pago"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Restante"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status Venda"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status Pagamento"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(t=>{const s=h(t.status),n=y(t.payment_status);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:t.payment_date?new Date(t.payment_date).toLocaleDateString("pt-BR"):"-"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:t.client_name}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:["R$ ",(t.total_amount||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:["R$ ",(t.shipping_amount||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("span",{className:t.received_amount>0?"text-green-700 font-medium":"text-gray-500",children:["R$ ",(t.received_amount||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("span",{className:t.remaining_amount>0?"text-orange-700 font-medium":"text-gray-500",children:["R$ ",(t.remaining_amount||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.class}`,children:s.label})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n.class}`,children:n.label})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm font-medium",children:[e.jsx("button",{className:"text-purple-600 hover:text-purple-900 mx-1",children:e.jsx(f,{className:"w-4 h-4"})}),e.jsxs("a",{href:`/sales/${t.id}/payments`,className:"text-blue-600 hover:text-blue-900 mx-1 inline-flex items-center",title:"Gerenciar Pagamentos",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),t.payments&&t.payments.length>0&&e.jsx("span",{className:"ml-1 text-xs bg-blue-100 text-blue-800 px-1 rounded",children:t.payments.length})]})]})]},t.id)})})]}),a.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Nenhuma venda encontrada com os filtros aplicados."})})]}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",a.length," de ",o.length," vendas"]}),e.jsx("button",{onClick:d,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Fechar"})]})]})})}export{k as S};
